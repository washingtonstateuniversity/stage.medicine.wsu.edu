/*! wsu-medicine */
/*  See https://github.com/washingtonstateuniversity/stage.medicine.wsu.edu/ for full source.*/
!function(a,b){function c(){return 0===A&&(A=a(".home").length>0),A}function d(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1}function e(){var c=jQuery("#seats_comparison_container"),d=jQuery("#mi_wa_graph_container");c.length>0&&(p=c.offset().top-jQuery(b).height()+100,a(b).on("scroll",f)),d.length>0&&(q=d.offset().top-jQuery(b).height()+100,a(b).on("scroll",g))}function f(){var c=jQuery(b).scrollTop();c>p&&(b.AdobeEdge.launchComposition("EDGE-21518124"),a(b).off("scroll",f))}function g(){var c=jQuery(b).scrollTop();c>q&&(b.AdobeEdge.launchComposition("wa_mi_comparison"),a(b).off("scroll",g))}function h(d){u=Math.round(a(b).width());var e;if(u!==r||void 0!==d){r=u,e=u>791?jQuery("#spine").offset().left+198:0;var f=Math.round(u-e);if(c()){t=Math.round(f/1.77),a(".home-featured-image").each(function(){a(this).css("width",f+"px"),a(this).css("height",t+"px")});var g=Math.round(f/3.15581854);a(".featured-image:not(.home-featured-image)").each(function(){a(this).css("width",f+"px"),a(this).css("height",g+"px")})}else t=Math.round(f/3.15581854),a(".featured-image").each(function(){a(this).css("width",f+"px"),a(this).css("height",t+"px")});c()&&i()}}function i(){var c=a(b).scrollTop();if(700>c){var d=a(".pic1"),e=d.height(),f=t-c-35,g=f/2-e/2+c;if(20>f-e)return;d.css("top",g+"px")}s=c}function j(){var b=jQuery("#main-replacement-"+n),c=jQuery("#main-replacement-content-"+n),d=c.html();b.off("click",j),c.remove();var e=b.offset().top;a("body").hasClass("admin-bar")&&(e-=32),a("#med-primary-content").addClass("med-to-replace"),a(".replacement-featured-image").css("background-position","0 0"),b.append(d),v.replaceWith(w),jQuery("#spine-sitenav").find(".current").removeClass(),jQuery("#menu-item-"+o).addClass("current active dogeared"),document.title=x+document.title.substr(document.title.indexOf(" |")),history.pushState({slug:z},"",y);var f="https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(y)+"&via=wsupullman";a("#wsu-share .by-twitter a").attr("href",f),jQuery("html,body").animate({scrollTop:e},800,"easeOutCubic",function(){"HTML"!=this.nodeName&&(b.replaceWith('<main id="med-primary-content" class="spine-blank-template">'+b.html()+"</main>"),a(".med-to-replace").remove(),a(document).scrollTop(0),a("body").hasClass("home")&&a("body").removeClass("home"),jQuery(".featured-image:first").removeClass("replacement-featured-image"),m(),l(),h(!0))})}function k(a){var b=jQuery("#main-replacement-"+n),c=jQuery("#main-replacement-content-"+n);c.append(a.content);var d=c.find(".h1-header");w=d.clone(),x=a.title,y=a.link,z=a.slug,v=d.find(".column h1"),v.addClass("med-footer-temp-header"),b.append(v),d.remove(),b.on("click",j)}function l(){void 0!==n&&a.getJSON(wsu_medicine.json_url+"pages/"+n+"/",k)}function m(){var b=a("#med-primary-content"),c=b.find(".med-replacement-container");if(n=c.data("next-id"),void 0!==n){o=c.data("next-menu-id");var d=c.html();c.remove(),b.after(d),jQuery("#main-replacement-"+n).css("display","")}}var n,o,p,q,r,s,t,u,v,w,x,y,z,A=0;a(document).ready(function(){var b="https://twitter.com/intent/tweet?text="+wsu_medicine.share_text+"&url="+wsu_medicine.share_url+"&via=wsupullman";a("#wsu-share .by-twitter a").attr("href",b),h(),e(),m(),l()}),!1===d()&&(b.onpopstate=function(a){a.state&&location.reload()})}(jQuery,window);